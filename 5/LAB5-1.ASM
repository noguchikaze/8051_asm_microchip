ORG	00H
JMP	START
ORG	50H

;R3=掃描

START:
	MOV	R3,#0		;掃描
	MOV	R1,#10H		;00010000B
	MOV	R0,#0		;index
	MOV	DPTR,#TABLE

BIG:
	INC	R3

	MOV	P1,#0H		;關閉共陽
	MOV	A,R0		;index of table
	MOVC	A,@A+DPTR
	MOV	P0,A
	MOV	P1,R1

	INC	R0
	MOV	A,R1	;R1右璇
	RR	A

	MOV	R1,A
	CALL	DELAY

	CJNE	R0,#5,BIG

	;當行數跑到最後一行了以後

	MOV	R0,#0		;行數歸零
	MOV	R1,#10H
	CJNE	R3,#0FFH,BIG
	MOV	DPTR,#TABLE2
	MOV	R3,#0		;掃描歸零


MID:
	MOV	P1,#0H		;關閉共陽
	MOV	A,R0		;index of table
	MOVC	A,@A+DPTR
	MOV	P0,A
	MOV	P1,R1

	INC	R3
	INC	R0
	MOV	A,R1	;R1右璇
	RR	A

	MOV	R1,A
	CALL	DELAY
	CJNE	R0,#5,MID
	MOV	R0,#0
	MOV	R1,#10H
	CJNE	R3,#0FFH,MID
	MOV	DPTR,#TABLE3
	MOV	R3,#0		;掃描歸零

SMALL:
	MOV	P1,#0H		;關閉共陽
	MOV	A,R0		;index of table
	MOVC	A,@A+DPTR
	MOV	P0,A
	MOV	P1,R1

	INC	R3
	INC	R0
	MOV	A,R1	;R1右璇
	RR	A

	MOV	R1,A
	CALL	DELAY
	CJNE	R0,#5,SMALL
	MOV	R0,#0
	MOV	R1,#10H
	CJNE	R3,#0FFH,SMALL
	MOV	DPTR,#TABLE
	MOV	R3,#0		;掃描歸零
	JMP	BIG


TABLE:
	DB	00010010B
	DB	00010100B
	DB	01111000B
	DB	00010100B
	DB	00010010B

TABLE2:

	DB	00011100B
	DB	00010100B
	DB	01111111B
	DB	00010100B
	DB	00011100B

TABLE3:
	DB	00001000B
	DB	00010000B
	DB	01111111B
	DB	00010010B
	DB	00001000B

DELAY:
	MOV	R6,#0AAH
DELAY1:
	MOV	R7,#02FH
DELAY2:
	DJNZ	R7,DELAY2
	DJNZ	R6,DELAY1
	RET
 END