ORG	00H
AJMP PRE
ORG 03H		;INT0 INTERRUPT VECTOR
AJMP INTERRUPT
ORG 50H
;=================================
INDEX	EQU	R3
TL	EQU	R2
TH	EQU	R4
COUNTER EQU B
;=================================
PRE:
MOV INDEX,#0
DEC INDEX	;讓他可以顯示字的第一個TABLE
MOV COUNTER,#0	;從0開始計算學號位數
SETB	IT0	;EDGE TRIGGER
SETB	EX0	;INT0 INTERRUPT ENABLED
CLR	IE0
SETB	PX0	;PRORITY
SETB	EA	;INTERRUPT ENABLED


INTERRUPT:
	INC COUNTER	;先++COUNTER
	CJNE COUNTER,#8,LED_SHOW	;如果已經顯示到最後一個數字就回到1
	MOV COUNTER,#1
LED_SHOW: 
		MOV		INDEX,#0 
		MOV		DPTR,#TABLE 
		MOV		R1,#24
NEXT_COLUMN: 
		CALL	READ_BYTE 
		MOV		P2,A 
		CALL	READ_BYTE 
		MOV		P0,A 
		CALL	READ_BYTE 
		MOV		P1,A 
		CALL	DELAY 
		DJNZ	R1,NEXT_COLUMN
RETI 
;=====READ 1 BYTE FROM TABLE=======================  
READ_BYTE:  
		INC		INDEX	;-1++=0
		MOV		
		CJNE	INDEX,#36,PRE
		MOV		INDEX,#0
		AJMP	CHANGE
CHANGE: 
		MOV		A,R0  
		MOVC	A,@A+DPTR  
		CPL		A  
RET
;====================================================	
DELAY: 
		MOV	R5,#25H	
DELAY1:
		MOV	R6,#0FFH
DELAY2:
		DJNZ	R6,DELAY2
		DJNZ	R5,DELAY1 
RET     

;===================================================	
TABLE:
;一個字有12行
        DB      0000000B,00000000B,00000000B
        DB      0000001B,11111111B,11100000B
        DB      0000111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,00000000B,00111100B
        DB      0011000B,00000000B,00001100B
        DB      0001100B,00000000B,00001100B
        DB      0001111B,10000000B,01111100B
        DB      0001111B,11111111B,11111100B
        DB      0000111B,11111111B,11111000B
        DB      0000000B,11111111B,11000000B
        DB      0000000B,00000000B,00000000B

        DB      0000000B,00000000B,00000000B
        DB      0000111B,10001111B,11111100B
        DB      0001111B,10001111B,11111100B
        DB      0001111B,10001111B,11111100B
        DB      0001000B,00000011B,00001100B
        DB      0011000B,00000011B,00001100B
        DB      0001100B,00000011B,00001100B
        DB      0001110B,00000111B,00001100B
        DB      0001111B,11111111B,00001100B
        DB      0000111B,11111110B,00001100B
        DB      0000001B,11111000B,00000000B
        DB      0000000B,00000000B,00000000B
		
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0001000B,00000000B,00011000B
        DB      0001000B,00000000B,00011000B
        DB      0001111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,11111111B,11111100B
        DB      0001000B,00000000B,00000000B
        DB      0001000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B

        DB      0000000B,00000000B,00000000B
        DB      0000001B,11111111B,11100000B
        DB      0000111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,00000000B,00111100B
        DB      0011000B,00000000B,00001100B
        DB      0001100B,00000000B,00001100B
        DB      0001111B,10000000B,01111100B
        DB      0001111B,11111111B,11111100B
        DB      0000111B,11111111B,11111000B
        DB      0000000B,11111111B,11000000B
        DB      0000000B,00000000B,00000000B

        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,01111100B
        DB      0000000B,00000000B,01111100B
        DB      0000000B,00000000B,00011100B
        DB      0000111B,00000000B,00001100B
        DB      0001111B,11111000B,00001100B
        DB      0001111B,11111110B,00001100B
        DB      0001111B,11111111B,11001100B
        DB      0000000B,00000011B,11101100B
        DB      0000000B,00000000B,01111100B
        DB      0000000B,00000000B,00111100B
        DB      0000000B,00000000B,00001100B

        DB      0000000B,11000000B,00000000B
        DB      0000000B,11110000B,00000000B
        DB      0000000B,11111100B,00000000B
        DB      0000000B,11011111B,00000000B
        DB      0001000B,11000111B,10000000B
        DB      0001000B,11000011B,11100000B
        DB      0001111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,11111111B,11111100B
        DB      0001000B,11000000B,00000000B
        DB      0001000B,11000000B,00000000B
        DB      0001000B,10000000B,00000000B
		
        DB      0000000B,00000000B,00000000B
        DB      0000011B,11000000B,01110000B
        DB      0001111B,11000000B,11111000B
        DB      0001111B,11000000B,11111100B
        DB      0001100B,10000100B,01001100B
        DB      0011000B,00000100B,00000100B
        DB      0011000B,00001110B,00001100B
        DB      0001100B,00001111B,10011100B
        DB      0001111B,11111111B,11111100B
        DB      0000111B,11111011B,11111000B
        DB      0000011B,11110000B,11110000B
        DB      0000000B,00000000B,00000000B
;=================================================		

